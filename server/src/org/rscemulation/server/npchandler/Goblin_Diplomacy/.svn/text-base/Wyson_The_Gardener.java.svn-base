/**
* Generated By NPCScript :: A scripting engine created for RSCEmulation by Zilent
*/
package org.rscemulation.server.npchandler.Goblin_Diplomacy;
import org.rscemulation.server.event.SingleEvent;
import org.rscemulation.server.model.Npc;
import org.rscemulation.server.model.InvItem;
import org.rscemulation.server.model.ChatMessage;
import org.rscemulation.server.model.MenuHandler;
import org.rscemulation.server.model.World;
import org.rscemulation.server.event.DelayedQuestChat;
import org.rscemulation.server.model.Player;
import org.rscemulation.server.npchandler.NpcHandler;
public class Wyson_The_Gardener implements NpcHandler {
	public void handleNpc(final Npc npc, final Player owner) throws Exception {
		npc.blockedBy(owner);
		owner.setBusy(true);
		World.getDelayedEventHandler().add(new DelayedQuestChat(npc, owner, new String[] {"Hey, I have heard you are looking for woad leaves"}, true) {
			public void finished() {
				World.getDelayedEventHandler().add(new SingleEvent(owner, 1500) {
					public void action() {
						final String[] options24 = {"Well yes I am.  Can I get some?", "Who told you that?"};
						owner.setBusy(false);
						owner.getActionSender().sendMenu(options24);
						owner.setMenuHandler(new MenuHandler(options24) {
							public void handleReply(final int option, final String reply) {
								owner.setBusy(true);
								for(Player informee : owner.getViewArea().getPlayersInView()) {
									informee.informOfChatMessage(new ChatMessage(owner, reply, npc));
								}
								switch(option) {
									case 0:
		World.getDelayedEventHandler().add(new DelayedQuestChat(npc, owner, new String[] {"Yes I have some somewhere"}) {
			public void finished() {
				World.getDelayedEventHandler().add(new DelayedQuestChat(owner, npc, new String[] {"Can I buy one please?"}) {
					public void finished() {
						World.getDelayedEventHandler().add(new DelayedQuestChat(npc, owner, new String[] {"How much are you willing to pay?"}) {
							public void finished() {
								World.getDelayedEventHandler().add(new SingleEvent(owner, 1500) {
									public void action() {
										final String[] options25 = {"How about 5 coins?", "How about 10 coins?", "How about 15 coins?", "How about 20 coins?"};
										owner.setBusy(false);
										owner.getActionSender().sendMenu(options25);
										owner.setMenuHandler(new MenuHandler(options25) {
											public void handleReply(final int option, final String reply) {
												owner.setBusy(true);
												for(Player informee : owner.getViewArea().getPlayersInView()) {
													informee.informOfChatMessage(new ChatMessage(owner, reply, npc));
												}
												switch(option) {
													case 0:
														five_Coins(npc, owner);
														break;
													case 1:
														five_Coins(npc, owner);
														break;
													case 2:
														fifteen_Coins(npc, owner);
														break;
													case 3:
														twenty_Coins(npc, owner);
														break;
												}
											}
										});
									}
								});
							}
						});
					}
				});
			}
		});

										break;
									case 1:
										World.getDelayedEventHandler().add(new DelayedQuestChat(npc, owner, new String[] {"I can't remember now.  Someone who visits the park", "I happen to have some woad leaves lying around", "Would you like to buy some?"}) {
											public void finished() {
												World.getDelayedEventHandler().add(new SingleEvent(owner, 1500) {
													public void action() {
														final String[] options26 = {"Oh yes please", "No thanks, not right now"};
														owner.setBusy(false);
														owner.getActionSender().sendMenu(options26);
														owner.setMenuHandler(new MenuHandler(options26) {
															public void handleReply(final int option, final String reply) {
																owner.setBusy(true);
																for(Player informee : owner.getViewArea().getPlayersInView()) {
																	informee.informOfChatMessage(new ChatMessage(owner, reply, npc));
																}
																switch(option) {
																	case 0:
																		World.getDelayedEventHandler().add(new DelayedQuestChat(npc, owner, new String[] {"How much are you willing to pay?"}) {
																			public void finished() {
																				World.getDelayedEventHandler().add(new SingleEvent(owner, 1500) {
																					public void action() {
																						final String[] options27 = {"How about 5 coins?", "How about 10 coins?", "How about 15 coins?", "How about 20 coins?"};
																						owner.setBusy(false);
																						owner.getActionSender().sendMenu(options27);
																						owner.setMenuHandler(new MenuHandler(options27) {
																							public void handleReply(final int option, final String reply) {
																								owner.setBusy(true);
																								for(Player informee : owner.getViewArea().getPlayersInView()) {
																									informee.informOfChatMessage(new ChatMessage(owner, reply, npc));
																								}
																								switch(option) {
																									case 0:
																										five_Coins(npc, owner);
																										break;
																									case 1:
																										five_Coins(npc, owner);
																										break;
																									case 2:
																										fifteen_Coins(npc, owner);
																										break;
																									case 3:
																										twenty_Coins(npc, owner);
																										break;
																								}
																							}
																						});
																					}
																				});
																			}
																		});
																		break;
																	case 1:
																		owner.setBusy(false);
																		npc.unblock();
																		break;
																}
															}
														});
													}
												});
											}
										});
										break;
								}
							}
						});
					}
				});
			}
		});
	}

	private void five_Coins(final Npc npc, final Player owner) {
		World.getDelayedEventHandler().add(new DelayedQuestChat(npc, owner, new String[] {"No no, that's far too little.  Woad leaves are hard to get you know", "I use to have plenty, but someone kept stealing them off me"}) {
			public void finished() {
				owner.setBusy(false);
				npc.unblock();
			}
		});
	}
	private void fifteen_Coins(final Npc npc, final Player owner) {
		World.getDelayedEventHandler().add(new DelayedQuestChat(npc, owner, new String[] {"Ok, that sounds fair."}) {
			public void finished() {
				owner.getActionSender().sendMessage("You give Wyson 15 coins");
				owner.getInventory().remove(new InvItem(10, 15));
				owner.getActionSender().sendMessage("Wyson the gardener gives you some woad leaves");
				owner.getInventory().add(new InvItem(281, 1));
				owner.getActionSender().sendInventory();
				owner.setBusy(false);
				npc.unblock();
			}
		});
	}
	private void twenty_Coins(final Npc npc, final Player owner) {
		World.getDelayedEventHandler().add(new DelayedQuestChat(npc, owner, new String[] {"Ok, that's more than fair."}) {
			public void finished() {
				owner.getActionSender().sendMessage("You give Wyson 20 coins");
				owner.getInventory().remove(new InvItem(10, 20));
				owner.getActionSender().sendMessage("Wyson the gardener gives you some woad leaves");
				owner.getInventory().add(new InvItem(281, 1));
				World.getDelayedEventHandler().add(new DelayedQuestChat(npc, owner, new String[] {"Here, have some more, you're a generous person"}) {
					public void finished() {
						owner.getActionSender().sendMessage("Wyson the gardener gives you some more woad leaves");
						owner.getInventory().add(new InvItem(281, 1));
						owner.getActionSender().sendInventory();
						owner.setBusy(false);
						npc.unblock();
					}
				});
			}
		});
	}
}